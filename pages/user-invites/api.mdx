import { Callout } from 'nextra-theme-docs'
import { Tab, Tabs } from 'nextra-theme-docs';

# User Invites API

## Introduction

The user invite API is used directly by the UI components (e.g. The [**`<UserInvitesTable/>`**](/user-invites/ui-components#userinvitestable-)). However, you can also use it
programmatically.

## Mutations

### `sendUserInvites()`

The `sendUserInvites` API is used to invite users and automatically also create a user invite. You can find the full API doc of this mutation [here](https://jupiter-pp.roq-platform.com/docs/#mutation-sendUserInvites).

<Tabs items={['Node.js SDK','GraphQL']}>
<Tab>
```js
const status = await roqClient.asUser('530c9a92-71c5-4dce-a6e3-c638c2d0b1bc').sendUserInvites({
	userInvites: {
		tenantId: 'ee764883-f2c3-4486-9de6-070345e350af',
		userInvites: [{
			createdByUserId: '530c9a92-71c5-4dce-a6e3-c638c2d0b1bc',
			email: "wick.john@gmail.com",
			locale: "en-US",
			roles: ["content-creator"]
		}]
	}
})
```
</Tab>
<Tab>

```graphql
mutation {
  sendUserInvites(
    userInvites: {
      userInvites: [
        {
          email: "wick.john@gmail.com"
          firstName: "John"
          lastName: "Wick"
          locale: "en-US"
          createdByUserId: "530c9a92-71c5-4dce-a6e3-c638c2d0b1bc"
          roles: ["content-creator"]
        }
      ]
      tenantId: "ee764883-f2c3-4486-9de6-070345e350af"
    }
  ) {
    success {
      status
    }
    errors {
      error
    }
  }
}
```

</Tab></Tabs>

| Parameter         | Type   | Description                                  |
|-------------------|--------|----------------------------------------------|
| `userInvites`     | object | User invites data |
| `userInvites:tenantId` | uuid |  ID of the tenant (organization) | 
| `userInvites:userInvites` | array | Array of invitees |
| `userInvites:userInvites:email`           | string | Email of the invitee                         |
| `userInvites:userInvites:firstName`       | string | First name of the invitee                    |
| `userInvites:userInvites:lastName`        | string | Last name of the invitee                     |
| `userInvites:userInvites:locale`          | string | Language of the invitee (used for the email) |
| `userInvites:userInvites:data`            | array  | Additional custom data                       |
| `userInvites:userInvites:createdByUserId` | uuid   | ID of the inviting user                      |
| `userInvites:userInvites:roles`           | array  | Array of IDs of roles for the invitee        |


### `resendUserInvite()`

The `resendUserInvite` API will resend the invitation to the invitee. The full API documentation for this method is [here](https://jupiter-pp.roq-platform.com/docs/#mutation-resendUserInvite).

<Tabs items={["Node.js SDK", "GraphQL"]}>
<Tab>
```js
const userInviteModel = await roqClient.asUser("530c9a92-71c5-4dce-a6e3-c638c2d0b1bc").resendUserInvite("d1459a92-71c5-4edc-a6a1-c638c2d0d34c")
```
</Tab>
<Tab>
```graphql
mutation resendUserInvite($id: ID! = "d1459a92-71c5-4edc-a6a1-c638c2d0d34c" ) {
  resendUserInvite(id: $id) {
    id
    email
    firstName
    lastName
    locale
    data
    status
    createdByUserId
    userTokenId
    acceptedByUserId
    tenantId
    roleKeys
    createdAt
    updatedAt
    statusUpdatedAt
  }
}
```
</Tab>
</Tabs>

| Parameter         | Type   | Description                                  |
|-------------------|--------|-----------------|
| `id`              | uuid   | The invitee ID  |

### `cancelUserInvite()` 

The `cancelUserInvite` API will cancel a user invitation. The documentation for this API is [here](https://jupiter-pp.roq-platform.com/docs/#mutation-cancelUserInvite).

<Tabs items={["Node.js SDK", "GraphQL"]}>
<Tab>
```js
const userInviteModel = await roqClient.asUser("530c9a92-71c5-4dce-a6e3-c638c2d0b1bc").cancelUserInvite("d1459a92-71c5-4edc-a6a1-c638c2d0d34c")
```
</Tab>
<Tab>
```graphql
mutation cancelUserInvite($id: ID! = "d1459a92-71c5-4edc-a6a1-c638c2d0d34c" ) {
  cancelUserInvite(id: $id) {
    id
    email
    firstName
    lastName
    locale
    data
    status
    createdByUserId
    userTokenId
    acceptedByUserId
    tenantId
    roleKeys
    createdAt
    updatedAt
    statusUpdatedAt
  }
}
```
</Tab>
</Tabs>


| Parameter         | Type   | Description                                  |
|-------------------|--------|-----------------|
| `id`              | uuid   | The invitee ID  |

## Queries

You can fetch invites using the `userInvite` and `userInvites` queries:

<Tabs items={['GraphQL']}><Tab>

```graphql
query {
  userInvites {
    data {
      email
      status
    }
  }
}

```

</Tab></Tabs>