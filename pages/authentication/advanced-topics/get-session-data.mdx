import { Callout } from "nextra-theme-docs";
import { Tab, Tabs } from "nextra-theme-docs";
import Image from "next/image";

# Get Data on The Current Session

## Client-side

If you want to access the current user's data, e.g., to show the user's first name, you can either use the useSession hook or an async helper.

{/* TODO Replace code when SaaS template is done */}

#### Hooks

##### `useSession()`

<Tabs items={['React', "Next.js"]}><Tab>

```typescript
import { useSession } from "@roq/ui-react";

const { session, status } = useSession();
const firstName = session.user.firstName;
```

</Tab>
<Tab>

```tsx
import { useSession } from "@roq/nextjs";

const { session, status } = useSession();
const firstName = session.user.firstName;
```
</Tab>
</Tabs>

##### `useRefetchSession()` 

This method is used to refetch the current token & session data (e.g., after a user updates their profile).

<Tabs items={['React', "Next.js"]}><Tab>

```tsx
import { useRoqComponents } from "@roq/ui-react";
function Button() {
  const { refetchSession } = useRoqComponents();
  return <button onClick={refetchSession}>Refetch session</button>;
}
```
</Tab>
<Tab>

```tsx
import { useRoqComponents } from "@roq/nextjs";
function Button() {
  const { refetchSession } = useRoqComponents();
  return <button onClick={refetchSession}>Refetch session</button>;
}
```

</Tab>
</Tabs>

#### Async Helper

{/* TODO add import and check if correct */}

<Tabs items={['React', 'Nextjs']}><Tab>
```tsx
import { getSession } from "@roq/ui-react";

const user = await getSession();
const firstName = user.session.user.firstName;
```

</Tab>
<Tab>

```tsx
import { getSession } from "@roq/nextjs";

const user = await getSession();
const firstName = user.session.user.firstName;
```

</Tab></Tabs>

## Server-side

You can access the current user's data using this request handler:

<Tabs items={['Next.js']}><Tab>

```tsx
import { getServerSession } from "@roq/nextjs";

async function handler(req: NextApiRequest, res: NextApiResponse) {
  const session = getServerSession(req);
  const user = session.user;
}
```
</Tab>
</Tabs>
